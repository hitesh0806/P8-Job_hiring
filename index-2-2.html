<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div id="welcomenote"></div>
        <button onclick="profile()" id="profile_btn">My profile</button><br><br>
        <div id="content_2"></div>
        <label style="font-weight: bold;">What role are you hiring for?</label><br><br>
        <input id="inputbtn" placeholder="e.g., frontend, backend, hardware">
        <button onclick="search()">Search</button><br><br>
        <div id="content_3"></div>
        <div id="content_4"></div><br>
        <button onclick="backtologin()">Log out</button>
    </body>
    <script>
      let main_content= document.querySelector('#content_2');
      let locstor_getitem_1=JSON.parse(localStorage.getItem('logged_in_details_2'));
      let locstor_getitem_2=JSON.parse(localStorage.getItem('profiles'));
window.onload=function()
{
  document.querySelector('#welcomenote').innerHTML=`<h2>Hello ${locstor_getitem_1.companyName}, Ready to hire employees..</h2>`;
}
let show=true;
function profile(){
  console.log('clicked')
      if(show){
        document.querySelector('#profile_btn').innerHTML='Hide profile';
        main_content.innerHTML=
        `<h4>Company name: ${locstor_getitem_1.companyName}</h4>
        <h4>Industry: ${locstor_getitem_1.industry}</h4>
        <h4 style:"font-weight:bold">Head quarters: ${locstor_getitem_1.hqAddress}</h4>
        <h4>Year founded: ${locstor_getitem_1.founded}</h4>
        <h4>Website: ${locstor_getitem_1.website}</h4><br>
        <h4>E-mail: ${locstor_getitem_1.contactEmail}</h4>
        <h4>Contact number: ${locstor_getitem_1.contactPhone}</h4>
        <h4>Password: ${locstor_getitem_1.Password}</h4>`;
        show=false;
      }
      else
      {
        main_content.innerHTML='';
        document.querySelector('#profile_btn').innerHTML='My profile';
        show=true;
      }
}
function search()
{
    
    let content_div=document.querySelector('#content_3');
    //let locstor_getitem_2=JSON.parse(localStorage.getItem('profiles'));
    let x= document.getElementById('inputbtn');
    let val= x.value;
    let k=0;
    let found=false;
    let list_1='';
    let list_2='';
    for(j=0; j<=locstor_getitem_2.length-1; j++)
     {
        if(val===locstor_getitem_2[j].Job_role)
          {
            list_1=`<button onclick="viewprofile(${j})">${locstor_getitem_2[j].name_}</button><br><br>`;
            list_2+=list_1;
            k++;
            content_div.innerHTML=`<h3>There are ${k} applicants interested in the ${val} role. Click on their names to view their profiles.<h3>`+list_2;
            found=true;
          }
          
      }
        if(!found)
         {
            content_div.innerHTML=`<h3>We could not find any applicants for ${val} role.<h3>`+list_2;
         }
}
function viewprofile(j)
{
    
    const {name_,number,address,e_mail,password,educational_qualification,board_10_value,board_12_value,ug_value,pg_value,place_of_study,experience,Job_role,user_number}=locstor_getitem_2[j];
    document.querySelector('#content_3').innerHTML=`
      <h4>Name: ${name_}</h4>
      <h4>Phone no.: ${number}</h4>
      <h4 style:"font-style:bold">Address: ${address}</h4>
      <h4>E-mail: ${e_mail}</h4>
      <h4>Password: ${password}</h4><br>
      <h2>Educational details:-</h2>
      <h4>Educational qualification: ${educational_qualification}</h4>
      <h4>10th board: ${board_10_value}</h4>
      <h4>12th board: ${board_12_value}</h4>
      <h4>University(UG): ${ug_value}</h4>
      <h4>University(PG): ${pg_value}</h4>
      <h4>Place of study: ${place_of_study}</h4>
      <h4>Experience: ${experience}</h4>
      <h4>Job-role: ${Job_role}</h4>
      <h4>User-number: ${user_number}</h4>
      <button onclick='connect(${j})'>Connect</button><br><br>
      <button onclick='back()'>Back</button><br><br>`;

}
/*function connect(j)
{
    
    document.querySelector('#content_4').innerHTML=`<input id='msg'></input><br>
    <button onclick='send(${j})'>send</button>`;
}*/
function connect(j){
      let y=locstor_getitem_2[j];
    let msg={
    offer:`<h4>Would u like to connect with ${locstor_getitem_1.companyName}?</h4>
    <button onclick="yes()">Yes</button>
    <button onclick="no()">No</button>`,
    locstor_getitem_1,
    }
    localStorage.setItem(y,JSON.stringify(msg));
    console.log(msg);
    console.log(y)
    alert('sent!!!')}
function backtologin()
{
  window.location.href='index-2-1.html';
}
function back(){
  search();
}
    </script>
</html>